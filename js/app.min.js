var symbols={star:"★",smiley:"☺"},sounds={squish:new Audio("sounds/squish.wav"),yipee:new Audio("sounds/yipee.wav"),yay:new Audio("sounds/yay.wav")},InfoDisplay=function(){},EnemyBicycleBottom=function(e,t){this.sprite="images/enemy-bicycle-bottom.png",this.x=e,this.y=t},EnemyCarBottom=function(e,t){this.sprite="images/enemy-car-bottom.png",this.x=e,this.y=t},EnemyTrainBottom=function(e,t){this.sprite="images/enemy-train2.png",this.x=e,this.y=t},EnemyTrainTop=function(e,t){this.sprite="images/enemy-train1.png",this.x=e,this.y=t},EnemyCarTop=function(e,t){this.sprite="images/enemy-car-top.png",this.x=e,this.y=t},EnemyBicycleTop=function(e,t){this.sprite="images/enemy-bicycle-top.png",this.x=e,this.y=t},Player=function(e,t){this.playerImage="images/char-texter.png",this.x=e,this.y=t};EnemyBicycleBottom.prototype.update=function(e){this.x+=(100*Math.random()+bugSpeed/1.8)*e,this.x-player.x<50&&this.y-player.y<50&&this.x-player.x>-50&&this.y-player.y>-50&&PlayerCrash(),this.x>600&&(this.x=-(500*Math.random()))},EnemyCarBottom.prototype.update=function(e){this.x+=(100*Math.random()+bugSpeed)*e,this.x-player.x<50&&this.y-player.y<50&&this.x-player.x>-50&&this.y-player.y>-50&&PlayerCrash(),this.x>600&&(this.x=-(500*Math.random()))},EnemyTrainBottom.prototype.update=function(e){this.x+=(100*Math.random()+bugSpeedFast)*e,this.x-player.x<50&&this.y-player.y<50&&this.x-player.x>-50&&this.y-player.y>-50&&PlayerCrash(),this.x>600&&(this.x=-(300*Math.random()))},EnemyTrainTop.prototype.update=function(e){this.x-=(100*Math.random()+bugSpeedFast)*e,this.x-player.x<50&&this.y-player.y<50&&this.x-player.x>-50&&this.y-player.y>-50&&PlayerCrash(),this.x<1&&(this.x=+(600*Math.random()+800))},EnemyCarTop.prototype.update=function(e){this.x-=(100*Math.random()+bugSpeed)*e,this.x-player.x<50&&this.y-player.y<50&&this.x-player.x>-50&&this.y-player.y>-50&&PlayerCrash(),this.x<1&&(this.x=+(600*Math.random()+800))},EnemyBicycleTop.prototype.update=function(e){this.x-=(100*Math.random()+bugSpeed/1.8)*e,this.x-player.x<50&&this.y-player.y<50&&this.x-player.x>-50&&this.y-player.y>-50&&PlayerCrash(),this.x<1&&(this.x=+(600*Math.random()+800))},EnemyBicycleBottom.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},EnemyCarBottom.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},EnemyTrainBottom.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},EnemyTrainTop.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},EnemyCarTop.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},EnemyBicycleTop.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.update=function(e){this.playerImg=this.playerImage,this.x*e,this.y*e},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.playerImg),this.x,this.y)},InfoDisplay.prototype.render=function(){ctx.font="56px Verdana",ctx.fillStyle="rgba(255, 255, 255, 1)",ctx.textAlign="right",ctx.fillText(gameLevel-1,80,115,ctx.canvas.height),3===lifeNumber&&ctx.fillText(symbols.star+symbols.star,690,115,ctx.canvas.height),2===lifeNumber&&ctx.fillText(symbols.star,690,115,ctx.canvas.height),0===lifeNumber&&GameOver()};var infodisplay=new InfoDisplay,player=new Player(304,498),enemyBicycleTop=new EnemyBicycleTop(2e3*Math.random(),0),enemyCarTop2=new EnemyCarTop(2e3*Math.random(),83),enemyTrain1=new EnemyTrainTop(2e3*Math.random(),166),enemyTrain2=new EnemyTrainBottom(2e3*Math.random(),249),enemyCarBottom1=new EnemyCarBottom(2e3*Math.random(),332),enemyBicycleBottom=new EnemyBicycleBottom(2e3*Math.random(),415);allEnemies=[enemyBicycleTop,enemyCarTop2,enemyTrain1,enemyTrain2,enemyCarBottom1,enemyBicycleBottom];var PlayerCrash=function(){sounds.squish.play(),lifeNumber-=1,0===lifeNumber&&gameLevel>10&&sounds.yay.play(),player.reset()},PlayerSuccess=function(){sounds.yipee.play(),gameLevel+=1,bugSpeed+=3.5*(bugSpeed+gameLevel)/(gameLevel*gameLevel),bugSpeedFast+=3.5*(bugSpeedFast+gameLevel)/(gameLevel*gameLevel),player.reset()},GameOver=function(){ctx.font="56px Verdana",ctx.fillStyle="rgba(255, 255, 255, 1)",ctx.textAlign="center",ctx.fillText("GAME OVER, LOL"+symbols.smiley,370,298,ctx.canvas.height),ctx.font="24px Verdana",ctx.fillText("press Esc for new game",370,372,ctx.canvas.height),Player.prototype.handleInput=function(e){switch(e){case"escape":NewGame()}}},NewGame=function(){Player.prototype.handleInput=function(e){switch(e){case"up":this.y>50?this.y=this.y-83:PlayerSuccess();break;case"down":this.y<498&&(this.y=this.y+83);break;case"left":this.x>10&&(this.x=this.x-100);break;case"right":this.x<600&&(this.x=this.x+100);break;case"escape":NewGame();default:return}},lifeNumber=3,gameLevel=1,bugSpeed=60,bugSpeedFast=130};NewGame(),Player.prototype.reset=function(){this.x=304,this.y=498},document.addEventListener("keyup",function(e){var t={37:"left",38:"up",39:"right",40:"down",27:"escape"};player.handleInput(t[e.keyCode])});